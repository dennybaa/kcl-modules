"""
This file was generated by the KCL auto-gen tool. DO NOT EDIT.
Editing this file might prove futile when you re-run the KCL auto-gen generate command.
"""
import regex
import k8s.apimachinery.pkg.apis.meta.v1


schema WasmPlugin:
    """
    extensions istio io v1alpha1 wasm plugin

    Attributes
    ----------
    apiVersion : str, default is "extensions.istio.io/v1alpha1", required
        APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
    kind : str, default is "WasmPlugin", required
        Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
    metadata : v1.ObjectMeta, default is Undefined, optional
        metadata
    spec : ExtensionsIstioIoV1alpha1WasmPluginSpec, default is Undefined, required
        spec
    status : any, default is Undefined, optional
        status
    """


    apiVersion: "extensions.istio.io/v1alpha1" = "extensions.istio.io/v1alpha1"

    kind: "WasmPlugin" = "WasmPlugin"

    metadata?: v1.ObjectMeta

    spec: ExtensionsIstioIoV1alpha1WasmPluginSpec

    status?: any


schema ExtensionsIstioIoV1alpha1WasmPluginSpec:
    """
    Extend the functionality provided by the Istio proxy through WebAssembly filters. See more details at: https://istio.io/docs/reference/config/proxy_extensions/wasm-plugin.html

    Attributes
    ----------
    failStrategy : str, default is Undefined, optional
        Specifies the failure behavior for the plugin due to fatal errors.

        Valid Options: FAIL_CLOSE, FAIL_OPEN
    imagePullPolicy : str, default is Undefined, optional
        The pull behaviour to be applied when fetching Wasm module by either OCI image or `http/https`.

        Valid Options: IfNotPresent, Always
    imagePullSecret : str, default is Undefined, optional
        Credentials to use for OCI image pulling.
    match : [ExtensionsIstioIoV1alpha1WasmPluginSpecMatchItems0], default is Undefined, optional
        Specifies the criteria to determine which traffic is passed to WasmPlugin.
    phase : str, default is Undefined, optional
        Determines where in the filter chain this `WasmPlugin` is to be injected.

        Valid Options: AUTHN, AUTHZ, STATS
    pluginConfig : any, default is Undefined, optional
        The configuration that will be passed on to the plugin.
    pluginName : str, default is Undefined, optional
        The plugin name to be used in the Envoy configuration (used to be called `rootID`).
    priority : int, default is Undefined, optional
        Determines ordering of `WasmPlugins` in the same `phase`.
    selector : ExtensionsIstioIoV1alpha1WasmPluginSpecSelector, default is Undefined, optional
        selector
    sha256 : str, default is Undefined, optional
        SHA256 checksum that will be used to verify Wasm module or OCI container.
    targetRef : ExtensionsIstioIoV1alpha1WasmPluginSpecTargetRef, default is Undefined, optional
        target ref
    $type : str, default is Undefined, optional
        Specifies the type of Wasm Extension to be used.

        Valid Options: HTTP, NETWORK
    url : str, default is Undefined, required
        URL of a Wasm module or OCI container.
    verificationKey : str, default is Undefined, optional
        verification key
    vmConfig : ExtensionsIstioIoV1alpha1WasmPluginSpecVMConfig, default is Undefined, optional
        vm config
    """


    failStrategy?: "FAIL_CLOSE" | "FAIL_OPEN"

    imagePullPolicy?: "UNSPECIFIED_POLICY" | "IfNotPresent" | "Always"

    imagePullSecret?: str

    match?: [ExtensionsIstioIoV1alpha1WasmPluginSpecMatchItems0]

    phase?: "UNSPECIFIED_PHASE" | "AUTHN" | "AUTHZ" | "STATS"

    pluginConfig?: any

    pluginName?: str

    priority?: int

    selector?: ExtensionsIstioIoV1alpha1WasmPluginSpecSelector

    sha256?: str

    targetRef?: ExtensionsIstioIoV1alpha1WasmPluginSpecTargetRef

    $type?: "UNSPECIFIED_PLUGIN_TYPE" | "HTTP" | "NETWORK"

    url: str

    verificationKey?: str

    vmConfig?: ExtensionsIstioIoV1alpha1WasmPluginSpecVMConfig


    check:
        len(imagePullSecret) <= 253 if imagePullSecret
        len(imagePullSecret) >= 1 if imagePullSecret
        len(pluginName) <= 256 if pluginName
        len(pluginName) >= 1 if pluginName
        regex.match(str(sha256), r"(^$|^[a-f0-9]{64}$)") if sha256
        len(url) >= 1


schema ExtensionsIstioIoV1alpha1WasmPluginSpecMatchItems0:
    """
    extensions istio io v1alpha1 wasm plugin spec match items0

    Attributes
    ----------
    mode : str, default is Undefined, optional
        Criteria for selecting traffic by their direction.

        Valid Options: CLIENT, SERVER, CLIENT_AND_SERVER
    ports : [ExtensionsIstioIoV1alpha1WasmPluginSpecMatchItems0PortsItems0], default is Undefined, optional
        Criteria for selecting traffic by their destination port.
    """


    mode?: "UNDEFINED" | "CLIENT" | "SERVER" | "CLIENT_AND_SERVER"

    ports?: [ExtensionsIstioIoV1alpha1WasmPluginSpecMatchItems0PortsItems0]


schema ExtensionsIstioIoV1alpha1WasmPluginSpecMatchItems0PortsItems0:
    """
    extensions istio io v1alpha1 wasm plugin spec match items0 ports items0

    Attributes
    ----------
    number : int, default is Undefined, required
        number
    """


    number: int


    check:
        number <= 65535
        number >= 1


schema ExtensionsIstioIoV1alpha1WasmPluginSpecSelector:
    """
    Criteria used to select the specific set of pods/VMs on which this plugin configuration should be applied.

    Attributes
    ----------
    matchLabels : {str:str}, default is Undefined, optional
        One or more labels that indicate a specific set of pods/VMs on which a policy should be applied.
    """


    matchLabels?: {str:str}


schema ExtensionsIstioIoV1alpha1WasmPluginSpecTargetRef:
    """
    Optional.

    Attributes
    ----------
    group : str, default is Undefined, optional
        group is the group of the target resource.
    kind : str, default is Undefined, optional
        kind is kind of the target resource.
    name : str, default is Undefined, optional
        name is the name of the target resource.
    namespace : str, default is Undefined, optional
        namespace is the namespace of the referent.
    """


    group?: str

    kind?: str

    name?: str

    namespace?: str


schema ExtensionsIstioIoV1alpha1WasmPluginSpecVMConfig:
    """
    Configuration for a Wasm VM.

    Attributes
    ----------
    env : [ExtensionsIstioIoV1alpha1WasmPluginSpecVMConfigEnvItems0], default is Undefined, optional
        Specifies environment variables to be injected to this VM.
    """


    env?: [ExtensionsIstioIoV1alpha1WasmPluginSpecVMConfigEnvItems0]


    check:
        len(env) <= 256


schema ExtensionsIstioIoV1alpha1WasmPluginSpecVMConfigEnvItems0:
    """
    extensions istio io v1alpha1 wasm plugin spec VM config env items0

    Attributes
    ----------
    name : str, default is Undefined, required
        Name of the environment variable.
    value : str, default is Undefined, optional
        Value for the environment variable.
    valueFrom : str, default is Undefined, optional
        Source for the environment variable's value.

        Valid Options: INLINE, HOST
    """


    name: str

    value?: str

    valueFrom?: "INLINE" | "HOST"


    check:
        len(name) <= 256
        len(name) >= 1
        len(value) <= 2048 if value


